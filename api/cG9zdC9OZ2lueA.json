{"title":"Nginx","date":"2018-12-23T05:16:35.000Z","slug":"Nginx","categories":["Linux"],"updated":"2018-12-23T06:59:13.927Z","content":"<h1 id=\"Nginx服务器\"><a href=\"#Nginx服务器\" class=\"headerlink\" title=\"Nginx服务器\"></a>Nginx服务器</h1><h3 id=\"1-阿里云添加80端口\"><a href=\"#1-阿里云添加80端口\" class=\"headerlink\" title=\"1.阿里云添加80端口\"></a>1.阿里云添加80端口</h3><p>阿里云上默认只有一个22端口用来做远程登录，如果希望在阿里云上安装支持http请求的nginx服务器，需要给阿里云添加80端口</p>\n<p><img src=\"../img/aliyun0.png\" alt=\"打开安全组设置\"><br><img src=\"../img/aliyun2.png\" alt=\"\"><br><img src=\"../img/aliyun3.png\" alt=\"\"><br><img src=\"../img/aliyun4.png\" alt=\"\"></p>\n<h3 id=\"2-安装nginx\"><a href=\"#2-安装nginx\" class=\"headerlink\" title=\"2. 安装nginx\"></a>2. 安装nginx</h3><p>a) 添加nginx存储库  </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install epel-release</span><br></pre></td></tr></table></figure>\n<p>b) 安装nginx</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install nginx</span><br></pre></td></tr></table></figure>\n<p>c) 运行nginx<br>Nginx不会自行启动。要运行Nginx  </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl start nginx</span><br></pre></td></tr></table></figure>\n<p>nginx的运行命令:  </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl status nginx 查看nginx的状态  </span><br><span class=\"line\">systemctl start/stop/enable/disable nginx 启动/关闭/设置开机启动/禁止开机启动</span><br></pre></td></tr></table></figure>\n<p>d) 系统启动时启动Nginx  </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl enable nginx</span><br></pre></td></tr></table></figure>\n<p>e）如果您正在运行防火墙，请运行以下命令以允许HTTP和HTTPS通信：   </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo firewall-cmd --permanent --zone=public --add-service=http </span><br><span class=\"line\"></span><br><span class=\"line\">sudo firewall-cmd --permanent --zone=public --add-service=https</span><br><span class=\"line\"></span><br><span class=\"line\">sudo firewall-cmd --reload</span><br></pre></td></tr></table></figure>\n<h3 id=\"3-nginx目录共享配置\"><a href=\"#3-nginx目录共享配置\" class=\"headerlink\" title=\"3.nginx目录共享配置\"></a>3.nginx目录共享配置</h3><p>a) 在contOS目录中确定一个需要共享的文件夹，例如： /home/yuting<br>b) 打开 etc/nginx/nginx.conf 文件，设置server</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#共享设置 - 在浏览器中输入服务器ip地址，会展示共享目录的文件列表</span><br><span class=\"line\">root /home/yuting;</span><br><span class=\"line\">location / &#123;</span><br><span class=\"line\">       autoindex on;</span><br><span class=\"line\">       autoindex_exact_size on;</span><br><span class=\"line\">       autoindex_localtime on;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>除了可以共享文件，还可以自定义页面</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#自定义服务器页面</span><br><span class=\"line\">location / &#123;</span><br><span class=\"line\">\t\troot /home/yuting;</span><br><span class=\"line\">\t\tindex index.html index.htm;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>注意： 如果出现权限问题，可以修改目录的权限  </p>\n<h1 id=\"ssh密钥认证\"><a href=\"#ssh密钥认证\" class=\"headerlink\" title=\"ssh密钥认证\"></a>ssh密钥认证</h1><p>1.在主机和从机上执行：<code>ssh-keygen</code></p>\n<p>2.在从机上执行:  <code>scp  id_rsa.pub  root@主机地址:~/.ssh/master.pub</code><br>(上面这条指令是将从机上的 id_rsa.pub文件拷贝传递给到主机的.ssh文件夹下，并且命名为’master.pub’)</p>\n<p>3.在主机中的.ssh文件夹中创建authorized_keys文件： <code>touch authorized_keys</code> </p>\n<p>4.修改文件authorized_keys的权限: <code>chmod 600  authorized_keys</code>  </p>\n<p>5.将master.pub放进authorized_keys文件中:  <code>cat master.pub &gt;&gt;  authorized_keys</code></p>\n<p>6.在操作主机的时候，需要主机能够自己免密访问自己就将自己的公钥放在自己的authorized_keys文件中</p>\n","prev":{"title":"Hello World","slug":"hello-world"},"next":{"title":"vim","slug":"vim操作"},"link":"http://yoursite.com/post/Nginx/","toc":[{"title":"Nginx服务器","id":"Nginx服务器","index":"1"},{"title":"ssh密钥认证","id":"ssh密钥认证","index":"2"}]}