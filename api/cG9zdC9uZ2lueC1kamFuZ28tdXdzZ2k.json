{"title":"nginx+django+uwsgi","date":"2019-01-21T11:56:46.000Z","slug":"nginx-django-uwsgi","updated":"2019-01-21T12:02:47.185Z","content":"<p>1.如果没有nginx,可参考以下步骤安装<br>yum install epel-release  # 安装nginx存储库<br>yum install nginx  # 安装nginx<br>systemctl start nginx  # 启动nginx<br>systemctl status nginx  # 查看nginx状态</p>\n<p>2.在虚拟环境中安装uwsgi<br>相应项目虚拟环境中绝对路径下的pip3 install uwsgi<br>例如： /home/env/blogback/bin/pip3 install uwsgi</p>\n<p>3.编写自己项目的nginx.conf配置文件<br>在项目父目录的同级目录下的conf文件夹里先创建两个文件<br>touch blogbacknginx.conf<br>touch blogbackuwsgi.ini</p>\n<p>vim blogbacknginx.conf</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">server &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">     # 监听端口</span><br><span class=\"line\"></span><br><span class=\"line\">     listen    8080;   </span><br><span class=\"line\"></span><br><span class=\"line\">     # 服务器公网IP</span><br><span class=\"line\"></span><br><span class=\"line\">     server_name 39.108.75.156;   </span><br><span class=\"line\"></span><br><span class=\"line\">     # 记录了哪些用户，哪些页面以及用户浏览器、ip和其他的访问信息</span><br><span class=\"line\"></span><br><span class=\"line\">     access_log /home/logs/blogbackaccess.log;  </span><br><span class=\"line\"></span><br><span class=\"line\">     # 记录服务器错误日志</span><br><span class=\"line\"></span><br><span class=\"line\">     error_log /home/logs/blogbackerror.log; </span><br><span class=\"line\"></span><br><span class=\"line\">     location / &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">         include uwsgi_params;</span><br><span class=\"line\"></span><br><span class=\"line\">         uwsgi_pass 127.0.0.1:8888;  # 端口随便写</span><br><span class=\"line\"></span><br><span class=\"line\">     &#125;   </span><br><span class=\"line\"></span><br><span class=\"line\">     # 指定静态文件路径，不用再通过框架处理，可直接访问</span><br><span class=\"line\"></span><br><span class=\"line\">     location /static/ &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">         alias /home/src/blogback/static/;</span><br><span class=\"line\"></span><br><span class=\"line\">     &#125;   </span><br><span class=\"line\"></span><br><span class=\"line\">     # 指定媒体文件路径，不用再通过框架处理，可直接访问</span><br><span class=\"line\"></span><br><span class=\"line\">     location /media/ &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">         alias /home/src/blogback/media/;</span><br><span class=\"line\"></span><br><span class=\"line\">     &#125; </span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>vim blogbackuwsgi.ini</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[uwsgi]</span><br><span class=\"line\"></span><br><span class=\"line\"># 守护进程</span><br><span class=\"line\">master =true</span><br><span class=\"line\"># 进程个数</span><br><span class=\"line\">processes = 4</span><br><span class=\"line\"># 指定虚拟环境</span><br><span class=\"line\">pythonhome = /home/env/blogback/bin/python3</span><br><span class=\"line\"># 指定项目路径</span><br><span class=\"line\">chdir = /home/src/blogback</span><br><span class=\"line\"># 指定项目的wsgi文件</span><br><span class=\"line\">module = blogback.wsgi</span><br><span class=\"line\"># 指定和nginx通信的地址</span><br><span class=\"line\">socket = 127.0.0.1:8888</span><br><span class=\"line\"># 日志文件地址</span><br><span class=\"line\">logto = /home/logs/blogbackuwsgi.log</span><br></pre></td></tr></table></figure>\n<p>4.指定nginx全局的配置文件<br>vim /etc/nginx/nginx.conf<br>37行添加<br>include /home/conf/*.conf</p>\n<p>5.重启nginx<br>systemctl restart nginx</p>\n<p>6.用uwsgi后台挂载项目<br>/home/env/blogback/uwsgi –ini /home/conf/bloguwsgi.ini &amp;</p>\n","prev":{"title":"Python ImportError: cannot import name","slug":"循环导包"},"next":{"title":"项目部署到服务器上的步骤","slug":"项目部署到服务器上"},"link":"http://yoursite.com/post/nginx-django-uwsgi/"}